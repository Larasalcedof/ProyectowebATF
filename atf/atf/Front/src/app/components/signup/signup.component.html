<p-toast></p-toast>
<div class="container">
    <div class="card">
        <img src="assets/logo-color.png" alt="Logo">
        <h1>Crea una cuenta</h1>

        <form class="flex flex-col w-full max-w-sm" [formGroup]="signinForm" (ngSubmit)="signin()">
            <div class="form-item">
                <label for="name">Nombres:</label>
                <input type="text" id="name" pInputText formControlName="name" />
                @if (!this.signinForm.get("name")?.pristine) {
                @if (this.signinForm.get("name")?.errors?.["required"]){
                <p-message severity="danger" text="El nombre es necesario"></p-message>
                }
                @else if (this.signinForm.get("name")?.errors?.["pattern"]) {
                <p-message severity="danger" text="Ingresa un nombre correcto"></p-message>
                }
                }
            </div>

            <div class="form-item">
                <label for="surname">Apellidos:</label>
                <input type="text" id="surname" pInputText formControlName="surname" />
                @if (!this.signinForm.get("surname")?.pristine) {
                @if (this.signinForm.get("surname")?.errors?.["required"]){
                <p-message severity="danger" text="El apellido es necesario"></p-message>
                }
                @else if (this.signinForm.get("surname")?.errors?.["pattern"]) {
                <p-message severity="danger" text="Ingresa un apellido correcto"></p-message>
                }
                }
            </div>

            <div class="form-item">
                <label for="email">Correo:</label>
                <input type="text" id="email" pInputText formControlName="email" />
                @if (!this.signinForm.get("email")?.pristine) {
                @if (this.signinForm.get("email")?.errors?.["required"]){
                <p-message severity="danger" text="El correo es necesario"></p-message>
                }
                @else if (this.signinForm.get("email")?.errors?.["email"]) {
                <p-message severity="danger" text="Ingresa un correo válido"></p-message>
                }
                }
            </div>

            <div class="form-item">
                <label for="tel">Teléfono celular:</label>
                <input type="text" id="tel" pInputText formControlName="tel" />
                @if (!this.signinForm.get("tel")?.pristine) {
                @if (this.signinForm.get("tel")?.errors?.["required"]){
                <p-message severity="danger" text="El número es necesario"></p-message>
                }
                @else if (this.signinForm.get("tel")?.errors?.["pattern"]) {
                <p-message severity="danger" text="Ingresa un número válido"></p-message>
                }
                }
            </div>

            <div class="form-item">
                <label for="password">Contraseña:</label>
                <p-password inputStyleClass="w-full" styleClass="w-full" id="password" formControlName="password"
                    [feedback]="false"></p-password>
                @if (!this.signinForm.get("password")?.pristine) {
                @if (this.signinForm.get("password")?.errors?.["required"] ) {
                <p-message severity="danger" text="La contraseña es necesaria"></p-message>
                }
                @else if (this.signinForm.get("password")?.errors?.["minlength"] ) {
                <p-message severity="danger" text="La contraseña debe ser de mínimo 8 carácteres"></p-message>
                }
                }

            </div>

            <div class="form-item">
                <label for="type">Tipo de usuario:</label>
                <p-dropdown formControlName="type" [options]="userType" optionLabel="display" optionValue="type"
                    placeholder="Selecciona el tipo de usuario" [style]="{width: '100%'}"/>
            </div>


            <p-button class="self-center" label="¿Ya tienes una cuenta? Inicia" [link]="true"
                [routerLink]="['/login']"></p-button>
            <p-button class="self-center" [loading]="loading" label="Iniciar" type="submit"
                [disabled]="signinForm.invalid"></p-button>
        </form>

    </div>
</div>